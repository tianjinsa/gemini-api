# Vue Layered Layout# vue-layered-layout

ä¸€ä¸ªä¸º Vue 3 è®¾è®¡çš„çµæ´»çš„å±‚å å¡ç‰‡å¸ƒå±€ç»„ä»¶åº“,æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯çš„è‡ªåŠ¨åˆ‡æ¢ã€‚ä¸€ä¸ªé¢å‘ Vue 3 çš„å“åº”å¼å±‚å å¸ƒå±€ç»„ä»¶åº“ï¼ŒæŠ½è±¡å‡º Dashboard é¡¹ç›®ä¸­çš„ä¸‰é¢æ¿å¸ƒå±€ç®—æ³•ã€‚å®ƒä¸“æ³¨äºæä¾›å¯é¢„æµ‹çš„ç©ºé—´åˆ’åˆ†ã€ç„¦ç‚¹ç®¡ç†ä¸äº¤äº’åŸºå…ƒï¼Œè€Œä¸å¯¹å†…å®¹æ ·å¼åšä»»ä½•å‡è®¾ï¼Œé€‚åˆä½œä¸ºä¸šåŠ¡ç•Œé¢ä¸­çš„åŸºç¡€å¸ƒå±€å¼•æ“ã€‚

## âœ¨ ç‰¹æ€§## âœ¨ ç‰¹æ€§

- ğŸ¯ **å¤šå¡ç‰‡ç»„æ”¯æŒ** - åœ¨åŒä¸€å®¹å™¨ä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„å¡ç‰‡ç»„- ğŸ“ **å±‚å å¸ƒå±€å¼•æ“**ï¼šåœ¨æ¡Œé¢ç«¯é‡‡ç”¨æ°´å¹³å±‚å  + åŠ¨æ€æœ€å°å®½åº¦ç­–ç•¥ï¼Œåœ¨ç§»åŠ¨ç«¯è‡ªåŠ¨åˆ‡æ¢ä¸ºå‚ç›´å †å ã€‚

- ğŸ“± **è‡ªé€‚åº”å¸ƒå±€** - æ ¹æ®å®¹å™¨å®½åº¦è‡ªåŠ¨åˆ‡æ¢æ°´å¹³/å‚ç›´å¸ƒå±€  - ğŸ¯ **ç„¦ç‚¹é©±åŠ¨**ï¼šé€šè¿‡ `setFocusedCard` æˆ– `requestFocus` ç²¾ç¡®æ§åˆ¶å±•å¼€å¡ç‰‡ï¼Œå¹¶è‡ªåŠ¨åˆ†é…å‰©ä½™ç©ºé—´ã€‚

- ğŸ¨ **CSS å•ä½æ”¯æŒ** - æ”¯æŒ pxã€vwã€vhã€% ç­‰ CSS å•ä½- ğŸ§© **çº¯æ’æ§½å†…å®¹**ï¼šå®¹å™¨ä¸å¡ç‰‡å¯¹å†…ä»…è´Ÿè´£å¸ƒå±€ä¸å°ºå¯¸æµ‹é‡ï¼Œæ‰€æœ‰ä¸šåŠ¡ UI å‡ç”±ä½¿ç”¨è€…é€šè¿‡æ’æ§½è‡ªå®šä¹‰ã€‚

- ğŸ’ª **TypeScript** - å®Œæ•´çš„ç±»å‹å®šä¹‰- âš™ï¸ **ç»„åˆå¼ API**ï¼š`useLayeredLayout` å¯è„±ç¦»ç»„ä»¶å•ç‹¬ä½¿ç”¨ï¼Œæ–¹ä¾¿æŒ‰éœ€æ¥å…¥ç°æœ‰é¡¹ç›®ã€‚

- ğŸš€ **é«˜æ€§èƒ½** - ä½¿ç”¨ ResizeObserver å®ç°é«˜æ•ˆçš„å°ºå¯¸ç›‘å¬- ğŸ§ª **TypeScript æ”¯æŒ**ï¼šå†…ç½®ç±»å‹å®šä¹‰ï¼Œæ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ `.d.ts`ã€‚

- ğŸ­ **éä¾µå…¥å¼** - çº¯å¸ƒå±€åŸè¯­,ä¸å¼ºåˆ¶ç‰¹å®š UI é£æ ¼

## ğŸ“¦ å®‰è£…

åœ¨ monorepo ä¸­å¯ä»¥é€šè¿‡ workspace å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥å‘å¸ƒåˆ°ç§æœ‰æºï¼š

```bash

npm install vue-layered-layout```bash

```npm install vue-layered-layout

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

```vue

<template>### ç»„åˆå¼ API

  <LayeredLayoutContainer :groups="groups">

    <template #default="{ group }">```ts

      <LayeredLayoutGroup v-bind="group">import { useLayeredLayout } from 'vue-layered-layout';

        <template #default="{ card, layout, focus, updateMetrics }">

          <LayeredLayoutCardconst { layout, setViewport, setContainerSize, setFocusedCard, updateCardHeader } = useLayeredLayout({

            :card-id="card.id"  cards: [

            :style="layout.style"    { id: 'alpha', minContentWidth: 480, fixedContentWidth: 480 },

            :is-focused="layout.isFocused"    { id: 'beta', minContentWidth: 560, fixedContentWidth: 560 },

            @focus="focus"    { id: 'gamma', minContentWidth: 720 }

            @update-metrics="updateMetrics"  ]

          >});

            <template #header>

              <h3>{{ card.id }}</h3>setViewport(window.innerWidth, window.innerHeight);

            </template>setContainerSize(1440, 860);

            <template #body>updateCardHeader('alpha', 96, 56);

              <p>å†…å®¹åŒºåŸŸ</p>setFocusedCard('beta');

            </template>```

          </LayeredLayoutCard>

        </template>### å®¹å™¨ç»„ä»¶

      </LayeredLayoutGroup>

    </template>```vue

  </LayeredLayoutContainer><template>

</template>  <LayeredLayoutContainer :cards="cards" v-slot="{ card, layout, updateMetrics, focus }">

    <div class="panel" :style="layout.style" @mouseenter="focus()">

<script setup lang="ts">      <header ref="(el) => registerHeader(el, card.id)">...</header>

import { ref } from 'vue';      <section ref="(el) => reportMetrics(el, card.id, updateMetrics)">...</section>

import {    </div>

  LayeredLayoutContainer,  </LayeredLayoutContainer>

  LayeredLayoutGroup,</template>

  LayeredLayoutCard,

  type CardGroupConfig<script setup lang="ts">

} from 'vue-layered-layout';import { LayeredLayoutContainer } from 'vue-layered-layout';

import 'vue-layered-layout/style.css';

const cards = [

const groups = ref<CardGroupConfig[]>([  { id: 'ipList', minContentWidth: 500, fixedContentWidth: 500 },

  {  { id: 'topicList', minContentWidth: 600, fixedContentWidth: 600 },

    id: 'main',  { id: 'messageList', minContentWidth: 720 }

    cards: [];

      { id: 'card-1', minContentWidth: 400 },</script>

      { id: 'card-2', minContentWidth: 500, initialFocus: true },```

      { id: 'card-3', minContentWidth: 600 }

    ]## ğŸ§° API å‚è€ƒ

  }

]);### `CardConfig`

</script>

```| å­—æ®µ | è¯´æ˜ |

| --- | --- |

## ğŸ“– æ–‡æ¡£| `id` | å¡ç‰‡å”¯ä¸€æ ‡è¯† |

| `minContentWidth` | æ¡Œé¢ç«¯å†…å®¹åŒºåŸŸæ‰€éœ€çš„æœ€å°å®½åº¦ |

- [ä½¿ç”¨æŒ‡å—](./doc/USER_GUIDE.md)| `minContentHeight?` | ç§»åŠ¨ç«¯å†…å®¹åŒºåŸŸæ‰€éœ€çš„æœ€å°é«˜åº¦ |

- [æŠ€æœ¯è§„æ ¼ä¹¦](./doc/æŠ€æœ¯è§„æ ¼ä¹¦.md)| `initialFocus?` | æ˜¯å¦åœ¨åˆå§‹åŒ–æ—¶èšç„¦è¯¥å¡ç‰‡ |

- [API å‚è€ƒ](./doc/USER_GUIDE.md#-api-å‚è€ƒ)| `fixedContentWidth?` | å›ºå®šå±•å¼€å®½åº¦ï¼ˆç”¨äºåˆ—è¡¨ç­‰å›ºå®šå°ºå¯¸é¢æ¿ï¼‰ |

| `fixedContentHeight?` | å›ºå®šå±•å¼€é«˜åº¦ |

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ| `maxContentWidth? / maxContentHeight?` | å±•å¼€æ—¶çš„ä¸Šé™ |

| `zIndex?` | æ˜¾ç¤ºå±‚çº§ |

### å¤šå¡ç‰‡ç»„

### `useLayeredLayout(options)`

æ¯ä¸ªå¡ç‰‡ç»„ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„å¸ƒå±€å’ŒçŠ¶æ€:

| é€‰é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |

```typescript| --- | --- | --- |

const groups = ref([| `cards` | å¿…å¡« | å¡ç‰‡é…ç½®æ•°ç»„ |

  {| `breakpoint` | `960` | è§†å£å®½åº¦ä½äºè¯¥å€¼æ—¶åˆ‡æ¢åˆ°å‚ç›´å¸ƒå±€ |

    id: 'top-section',| `activeBuffer` | `20` | èšç„¦å¡ç‰‡ç›¸å¯¹å†…å®¹å®½åº¦çš„é¢å¤–ç¼“å†² |

    className: 'top-panels',| `minExpandedWidth` | `420` | æ°´å¹³å¸ƒå±€ä¸‹çš„æœ€å°å±•å¼€å®½åº¦ |

    cards: [

      { id: 'overview' },è¿”å›å€¼ï¼š

      { id: 'stats' }

    ]- `layout`ï¼š`Ref<LayoutResult>`ï¼ŒåŒ…å« `orientation`ã€`cards`ã€`totalSpan`ã€`activeCardId`ã€‚

  },- `setViewport(width, height)`ï¼šè®¾ç½®è§†å£å°ºå¯¸ï¼Œè§¦å‘æ¨ªç«–æ¨¡å¼åˆ‡æ¢ã€‚

  {- `setContainerSize(width, height)`ï¼šæ›´æ–°å®¹å™¨å¤§å°ï¼Œä¸Šä¸‹é™è£å‰ªè‡ªåŠ¨å¤„ç†ã€‚

    id: 'bottom-section',- `setFocusedCard(id)`ï¼šèšç„¦æŒ‡å®šå¡ç‰‡ï¼Œä¼ å…¥ `null` æ¸…é™¤ç„¦ç‚¹ã€‚

    className: 'bottom-panels',- `updateCardHeader(id, width, height)`ï¼šç”±å­ç»„ä»¶ä¸ŠæŠ¥ header å°ºå¯¸ã€‚

    breakpoint: 768,  // ç‹¬ç«‹çš„æ–­ç‚¹- `updateCardMetrics(id, width, height)`ï¼šä¸ŠæŠ¥å†…å®¹åŒºåŸŸå°ºå¯¸ã€‚

    cards: [

      { id: 'details' },## ğŸ§ª æµ‹è¯•

      { id: 'logs' }

    ]```bash

  }cd packages/layered-card-layout

]);npm install

```npm run test

```

### è‡ªé€‚åº”å¸ƒå±€

## ğŸ“œ è®¸å¯è¯

å¸ƒå±€æ–¹å‘è‡ªåŠ¨æ ¹æ®å®¹å™¨å®½åº¦å†³å®š:

MIT License Â© 2025-present

```typescript
// å½“å®¹å™¨å®½åº¦ >= æ‰€æœ‰å¡ç‰‡çš„(headerWidth + minContentWidth)ä¹‹å’Œ
// â†’ æ°´å¹³å¸ƒå±€

// å½“å®¹å™¨å®½åº¦ < æ‰€éœ€æœ€å°å®½åº¦
// â†’ å‚ç›´å¸ƒå±€(ç§»åŠ¨ç«¯)
```

### CSS å•ä½

æ”¯æŒçµæ´»çš„ CSS å•ä½:

```typescript
{
  minContentWidth: 500,        // æ•°å­—é»˜è®¤ä¸º px
  minContentWidth: '50vw',     // è§†å£å®½åº¦
  minContentWidth: '80%',      // å®¹å™¨ç™¾åˆ†æ¯”
  minContentHeight: '100vh'    // è§†å£é«˜åº¦
}
```

## ğŸ”§ é…ç½®é¡¹

### CardGroupConfig

```typescript
interface CardGroupConfig {
  id: string;                    // ç»„ ID
  cards: CardConfig[];           // å¡ç‰‡é…ç½®
  className?: string;            // CSS ç±»å
  style?: Record<string, any>;   // å†…è”æ ·å¼
  breakpoint?: number;           // æ–­ç‚¹(é»˜è®¤: 960)
  activeBuffer?: number;         // æ¿€æ´»ç¼“å†²(é»˜è®¤: 20)
}
```

### CardConfig

```typescript
interface CardConfig {
  id: string;
  minContentWidth?: CSSSize;     // æœ€å°å®½åº¦(é»˜è®¤: 500)
  minContentHeight?: CSSSize;    // æœ€å°é«˜åº¦(é»˜è®¤: 500)
  maxContentWidth?: CSSSize;     // æœ€å¤§å®½åº¦
  maxContentHeight?: CSSSize;    // æœ€å¤§é«˜åº¦
  headerWidth?: number;          // è‡ªå®šä¹‰å¤´éƒ¨å®½åº¦
  headerHeight?: number;         // è‡ªå®šä¹‰å¤´éƒ¨é«˜åº¦
  initialFocus?: boolean;        // åˆå§‹èšç„¦
  zIndex?: number;               // å±‚çº§
}
```

## ğŸ¨ æ ·å¼å®šåˆ¶

```vue
<style>
/* è‡ªå®šä¹‰å¡ç‰‡æ ·å¼ */
:deep(.vl-layered-card) {
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* èšç„¦çŠ¶æ€ */
:deep(.vl-layered-card.is-focused) {
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
}
</style>
```

## ğŸ“„ è®¸å¯è¯

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!
